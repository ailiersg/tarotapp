{"version":3,"sources":["webpack:///./src/app/my-explain-setserviceimgs/my-explain-setserviceimgs.module.ts","webpack:///./src/app/my-explain-setserviceimgs/my-explain-setserviceimgs.page.html","webpack:///./src/app/my-explain-setserviceimgs/my-explain-setserviceimgs.page.scss","webpack:///./src/app/my-explain-setserviceimgs/my-explain-setserviceimgs.page.ts"],"names":[],"mappings":"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","file":"my-explain-setserviceimgs-my-explain-setserviceimgs-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MyExplainSetserviceimgsPage } from './my-explain-setserviceimgs.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MyExplainSetserviceimgsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [MyExplainSetserviceimgsPage]\n})\nexport class MyExplainSetserviceimgsPageModule {}\n","module.exports = \"<ion-header no-border>\\n  <div class=\\\"{{header_class}}\\\">\\n    <div class=\\\"head_berd\\\">\\n      <ion-toolbar color=\\\"primary\\\" mode=\\\"md\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n          <ion-back-button text=\\\"\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>设置封面</ion-title>\\n        <ion-buttons slot='end'>\\n          <ion-button ion-button icon-only (click)=\\\"add_img()\\\">\\n            <ion-icon name=\\\"more\\\"></ion-icon>\\n          </ion-button>\\n        </ion-buttons>\\n      </ion-toolbar>\\n    </div>\\n  </div>\\n</ion-header>\\n\\n\\n<ion-content style=\\\"background: #000000;\\\">\\n\\n  <div style=\\\"margin-top:1.5rem;\\\">\\n\\n    <img src=\\\"{{showImg}}\\\" style=\\\"width:100%\\\">\\n\\n  </div>\\n\\n\\n</ion-content>\"","module.exports = \".header_class_ {\\n  padding-top: 20px;\\n  background: rgba(49, 49, 49, 0.9); }\\n\\n.toolbar-ios-button2 .toolbar-background-ios {\\n  background: rgba(49, 49, 49, 0.9) !important; }\\n\\n.toolbar-ios-button2 .toolbar-title-ios, .toolbar-ios-button2 .bar-button-clear-ios, .toolbar-ios-button2 .bar-button-default-ios {\\n  color: #eeeeee; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9mZWl5ZS9Eb2N1bWVudHMvbXlhcHAgaW9uaWM0L215QXBwL3NyYy9hcHAvbXktZXhwbGFpbi1zZXRzZXJ2aWNlaW1ncy9teS1leHBsYWluLXNldHNlcnZpY2VpbWdzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGlCQUFpQjtFQUNqQixpQ0FBOEIsRUFBQTs7QUFHbEM7RUFDSSw0Q0FBeUMsRUFBQTs7QUFFN0M7RUFDSSxjQUFhLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9teS1leHBsYWluLXNldHNlcnZpY2VpbWdzL215LWV4cGxhaW4tc2V0c2VydmljZWltZ3MucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmhlYWRlcl9jbGFzc197XG4gICAgcGFkZGluZy10b3A6IDIwcHg7XG4gICAgYmFja2dyb3VuZDogcmdiYSg0OSw0OSw0OSwwLjkpO1xufVxuXG4udG9vbGJhci1pb3MtYnV0dG9uMiAudG9vbGJhci1iYWNrZ3JvdW5kLWlvc3tcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDQ5LDQ5LDQ5LDAuOSkgIWltcG9ydGFudDtcbn1cbi50b29sYmFyLWlvcy1idXR0b24yIC50b29sYmFyLXRpdGxlLWlvcywgLnRvb2xiYXItaW9zLWJ1dHRvbjIgLmJhci1idXR0b24tY2xlYXItaW9zLCAudG9vbGJhci1pb3MtYnV0dG9uMiAuYmFyLWJ1dHRvbi1kZWZhdWx0LWlvc3tcbiAgICBjb2xvcjojZWVlZWVlO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { NavController, NavParams, AlertController, ActionSheetController, LoadingController } from '@ionic/angular';\nimport { WitePrompt, AppMin, } from '../core';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\n\n// var MyExplainSetserviceimgsPage_message;\n\n@Component({\n  selector: 'app-my-explain-setserviceimgs',\n  templateUrl: './my-explain-setserviceimgs.page.html',\n  styleUrls: ['./my-explain-setserviceimgs.page.scss'],\n})\nexport class MyExplainSetserviceimgsPage implements OnInit {\n  loader;\n  header_class;\n\n  selectImgUrl = \"\";\n\n\n  showImg;\n  constructor(public appmin: AppMin, public navCtrl: NavController, public alertCtrl: AlertController, public actionSheetCtrl: ActionSheetController, public loadingCtrl?: LoadingController, private camera?: Camera) {\n\n    if (appmin.GetPhoneMode() == \"ios\") {\n      this.header_class = \"header_class\";\n    }\n    else {\n      this.header_class = \"header_class_md\";\n      console.log(\"判断为安卓系统 设置状态栏样式\")\n    }\n\n    // socket1.removeEventListener('message', MyExplainSetserviceimgsPage_message);\n    // let _this = this;\n    // MyExplainSetserviceimgsPage_message = function (event) {\n\n    //   let meg = JSON.parse(event.data);\n    //   if (meg.type == \"error\") {\n    //     WitePrompt(\"MyExplainSetserviceimgsPage页面监听消息===\" + JSON.stringify(meg));\n    //   } else {\n    //     WitePrompt(\"MyExplainSetserviceimgsPage页面监听消息===\" + meg.type);\n    //   }\n    //   if (_this.loader) {\n    //     _this.loader.dismiss();\n    //     _this.loader = null;\n    //   }\n    //   //安全的删除加载框结束 --  addServiceImgs\n\n    //   if (meg.type == 'addServiceImgs_ret') {\n    //     _this.dataHandle(meg);\n\n    //   }\n    //   if (meg.type == 'upUserServiceImg_ret') {\n    //     _this.dataHandle(meg);\n\n    //   }\n\n\n    // }\n    // socket1.addEventListener('message', MyExplainSetserviceimgsPage_message);\n  }\n \n\n  addServiceImgs() { \n    console.log(\"addServiceImgs()!\");\n    let obj = {\n      type: \"serviceImgs\",\n      userId: this.appmin.getUserid()\n    }\n\n    this.send(JSON.stringify(obj), false);\n  }\n  send(value, isshow?: boolean) {\n\n    if (isshow) {\n      if (!this.loader) {\n        this.loader = this.loadingCtrl.create({\n          message: \"加载中...\",\n          duration: 3000\n\n        });\n        this.loader.present();\n      }\n\n    }\n\n    // this.appmin.send(value);\n    // WitePrompt(\"发送了数据=\" + value);\n\n\n    this.appmin.post(JSON.parse(value)).subscribe((data) => {\n      this.dataHandle(data);\n    })\n    \n\n  }\n  Photograph() {\n    //拍照上传\n\n    console.log(\"拍照上传\")\n    const options: CameraOptions = {\n      quality: 100,\n      destinationType: this.camera.DestinationType.FILE_URI,//返回值格式\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      targetWidth: 800,\n      targetHeight: 450,\n      allowEdit: true,  //选择前编辑图像\n      cameraDirection: 0,//使用前置相机\n\n\n    }\n    this.camera.getPicture(options).then((imageData) => {\n      // imageData is either a base64 encoded string or a file URI\n      // If it's base64:\n      //let base64Image = 'data:image/jpeg;base64,' + imageData;\n      this.getBase64Image(imageData);\n    }, (err) => {\n      // Handle error\n    });\n  }\n\n  deleteServiceImg() {\n    //删除图片按钮\n    let obj = {\n      type: \"deleteServiceImg\",\n      userId: this.appmin.getUserid(),\n      imgUrl: this.selectImgUrl\n    }\n    this.send(JSON.stringify(obj), true);\n  }\n\n  async add_img() {\n    //添加图片按钮\n    console.log(\"添加图片按钮\");\n\n    let actionSheet = await this.actionSheetCtrl.create({\n      header: '',\n      buttons: [\n        {\n          text: '图库',\n          role: 'destructive',\n          // icon: \"ios-image-outline\",\n          handler: () => {\n            WitePrompt('从图库上传');\n            this.userSelectImg();\n\n          }\n        }, {\n          text: '拍照',\n          // icon: \"ios-reverse-camera-outline\",\n          handler: () => {\n            WitePrompt('拍照');\n            this.Photograph();\n          }\n        }, {\n          text: '取消',\n          role: 'cancel',\n          // icon: 'ios-log-out-outline',\n          handler: () => {\n            console.log('取消 clicked');\n          }\n        }\n      ]\n    });\n    actionSheet.present();\n  }\n  userSelectImg() {\n    //从图库上传\n    console.log(\"从图库上传\")\n    const options: CameraOptions = {\n      quality: 100,//质量 0-100 100不压缩\n      sourceType: 0, //从图库选择\n      destinationType: this.camera.DestinationType.FILE_URI,//返回值格式\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      targetWidth: 800,\n      targetHeight: 450,\n      // allowEdit: true\n\n    }\n\n    this.camera.getPicture(options).then((imageData) => {\n      // imageData is either a base64 encoded string or a file URI\n      // If it's base64:\n      //let base64Image = 'data:image/jpeg;base64,' + imageData;\n\n      this.getBase64Image(imageData);\n\n\n      //alert(imageData);\n    }, (err) => {\n      // Handle error\n    });\n\n  }\n\n  getBase64Image(imgUri) {\n    //转码并发送\n    console.log(\"转码并发送\");\n    //console.log(\"imgUri=\" + imgUri);\n    // imgUri=normalizeURL(imgUri);//解决WKWebView兼容问题\n    imgUri=(<any>window).Ionic.WebView.convertFileSrc(imgUri);\n\n    let this1 = this;\n    let img = new Image();\n    img.src = imgUri;\n    img.onload = function () {\n      console.log(\"getBase64Image()-图像载入正常\");\n      var canvas = document.createElement(\"canvas\");\n      canvas.width = img.width;\n      canvas.height = img.height;\n      var ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0, img.width, img.height);\n      //var ext = img.src.substring(img.src.lastIndexOf(\".\") + 1).toLowerCase();\n      var dataURL = canvas.toDataURL(\"image/jpeg\");\n      console.log(\"dataURL=\" + dataURL);\n\n\n      let upobj = {\n        type: \"upUserServiceImg\",\n        userid: this1.appmin.getUserid(),\n        imgBase64: dataURL\n      }\n\n      this1.send(JSON.stringify(upobj), true);\n      console.log(JSON.stringify(upobj));\n\n\n\n    }\n    img.onerror = function () {\n      console.log(\"getBase64Image_图像载入失败\");\n    }\n\n  }\n\n  async presentAlert(val) {\n    let alert = await this.alertCtrl.create({\n      header: '提示',\n      subHeader: val,\n      buttons: ['确定']\n    });\n    alert.present();\n  }\n\n  dataHandle(msg) {\n    if (msg['type'] == 'upUserServiceImg_ret') {\n      this.addServiceImgs();//上传图片后 重新加载以便刷新显示图片\n      console.log(\"重新加载以便刷新显示图片\");\n    }\n    if (msg['type'] == 'addServiceImgs_ret') {\n\n      console.log(\"addServiceImgs_ret=\" + JSON.stringify(msg));\n      if (msg[\"serviceImgs\"] != undefined && msg[\"serviceImgs\"] != null) {\n        this.showImg = msg[\"serviceImgs\"];\n      }\n    }\n\n  }\n\n  ngOnInit() {\n    this.addServiceImgs();//加载初始图片\n  }\n\n}\n"],"sourceRoot":""}