{"version":3,"sources":["webpack:///./src/app/myletter/myletter.module.ts","webpack:///./src/app/myletter/myletter.page.html","webpack:///./src/app/myletter/myletter.page.scss","webpack:///./src/app/myletter/myletter.page.ts"],"names":[],"mappings":"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","file":"myletter-myletter-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { MyletterPage } from './myletter.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MyletterPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [MyletterPage]\n})\nexport class MyletterPageModule {}\n","module.exports = \"<ion-header no-border>\\n  <div class=\\\"{{header_class}}\\\">\\n    <div class=\\\"head_berd\\\">\\n      <ion-toolbar color=\\\"primary\\\" mode=\\\"ios\\\">\\n        <ion-buttons slot=\\\"secondary\\\">\\n          <ion-back-button text=\\\"\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-title>我的消息</ion-title>\\n      </ion-toolbar>\\n    </div>\\n  </div>\\n\\n</ion-header>\\n\\n\\n<ion-content>\\n\\n\\n  <ion-refresher *ngIf=\\\"appMin.islogin()\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content pullingIcon=\\\"Crescent\\\" refreshingSpinner=\\\"circles\\\">\\n    </ion-refresher-content>\\n  </ion-refresher>\\n\\n  <div style=\\\"margin-top: 1rem;padding: 0px;\\\">\\n    <ion-list style=\\\"margin:0px\\\">\\n      <ion-item detail (click)=\\\"note_click()\\\">\\n        <ion-avatar slot=\\\"start\\\">\\n          <img src=\\\"../assets/img/noteimg.png\\\">\\n\\n        </ion-avatar>\\n        <ion-label text-wrap>\\n          <ion-text color=\\\"primary\\\">\\n            <h3>系统消息</h3>\\n          </ion-text>\\n\\n\\n        </ion-label>\\n\\n        <ion-badge slot=\\\"end\\\" *ngIf=\\\"sysNotes > 0\\\" item-end color=\\\"secondary\\\">{{sysNotes}}</ion-badge>\\n      </ion-item>\\n    </ion-list>\\n    <div *ngIf=\\\"!is_show_ing\\\" style=\\\"text-align: center;color: #666666;margin-top: 1rem;font-size: 1.45rem\\\">\\n      {{logintxt}}\\n    </div>\\n    <ion-list style=\\\"margin:0px\\\">\\n      <ion-item detail *ngFor=\\\"let ContactIngItem of ContactIngItem let i of ContactIngItem.userid\\\"\\n        (click)=\\\"myobjimg_click(ContactIngItem)\\\">\\n        <ion-avatar slot=\\\"start\\\">\\n          <img src=\\\"{{ContactIngItem.UserImgUrl}}\\\">\\n        </ion-avatar>\\n        <ion-label text-wrap>\\n          <ion-text color=\\\"primary\\\">\\n            <h3>{{ContactIngItem.CName}}</h3>\\n          </ion-text>\\n          <p>{{ContactIngItem.letter}}</p>\\n\\n        </ion-label>\\n\\n        <ion-badge slot=\\\"end\\\" *ngIf=\\\"ContactIngItem.isRed > 0\\\" item-end color=\\\"secondary\\\">{{ContactIngItem.isRed}}\\n        </ion-badge>\\n      </ion-item>\\n    </ion-list>\\n  </div>\\n\\n\\n  <ion-infinite-scroll *ngIf=\\\"appMin.islogin()\\\" immediate-check=\\\"false\\\" (ionInfinite)=\\\"doInfinite($event)\\\">\\n    <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"加载中...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n\\n</ion-content>\"","module.exports = \"ion-note, ion-badge {\\n  font-size: 1rem; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9mZWl5ZS9Eb2N1bWVudHMvbXlhcHAgaW9uaWM0L215QXBwL3NyYy9hcHAvbXlsZXR0ZXIvbXlsZXR0ZXIucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZUFBZSxFQUFBIiwiZmlsZSI6InNyYy9hcHAvbXlsZXR0ZXIvbXlsZXR0ZXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLW5vdGUsaW9uLWJhZGdle1xuICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgIFxufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { NavController, AlertController, ActionSheetController, LoadingController } from '@ionic/angular';\n//import { MyletterDPage } from '../myletter-d/myletter-d'\nimport { AppMin } from '../core';\nimport { Storage } from '@ionic/storage';\n//import { ConsultTimePage } from '../consult-time/consult-time';\nimport { Router } from '@angular/router';\n\n\n\n\n@Component({\n  selector: 'app-myletter',\n  templateUrl: './myletter.page.html',\n  styleUrls: ['./myletter.page.scss'],\n})\nexport class MyletterPage implements OnInit {\n\n  loader;\n  is_show_ing: boolean;\n  infiniteScroll;\n  page: number = 0;\n  header_class;\n  ContactIngItem: any = [];\n  ContactIngItem_note: any;\n  refresher;\n  logintxt = \"没有其他消息。。\";\n  checkMore: boolean = true;\n  sysNotes = 0;\n\n  constructor(public navCtrl: NavController, public Router: Router, public appMin: AppMin, public alertCtrl: AlertController, public actionSheetCtrl: ActionSheetController, public loadingCtrl?: LoadingController, public storage?: Storage) {\n    if (this.appMin.GetPhoneMode() == \"ios\") {\n      this.header_class = \"header_class\";\n    }\n    else {\n      this.header_class = \"header_class\";\n      console.log(\"判断为安卓系统 设置状态栏样式\")\n    }\n\n\n\n\n  }\n  send(value, isshow?: boolean) {\n\n    if (!this.appMin.islogin()) {\n      console.log(\"未登录 不加载对话列表\")\n      return\n    };//没有登录 不加载任何数据\n\n    if (isshow) {\n\n      if (!this.loader) {\n        this.loader = this.loadingCtrl.create({\n          message: \"加载中...\",\n          duration: 3000\n        });\n        this.loader.present();\n      }\n\n    }\n\n\n    this.appMin.get(JSON.parse(value)).subscribe((data) => {\n      if (isshow) {\n        if (this.loader) {\n          this.loader.dismiss();\n        }\n\n      }\n\n      if (this.refresher) {\n\n        // this.refresher.target.cancel();\n      }\n\n      this.dataHandle(data, true);\n    })\n\n\n  }\n  getUserNote() {\n    let obj = {\n      type: 'getUserNote',\n      toUserId: this.appMin.getUserid(),\n    }\n    this.appMin.get((obj)).subscribe((data) => {\n      this.dataHandle(data, true);\n    })\n  }\n  doInfinite(infiniteScroll) {\n    //无限加载\n    if (!this.checkMore) {\n      infiniteScroll.target.complete();\n      return;\n    }\n    this.infiniteScroll = infiniteScroll;\n\n    this.addContactIng();\n  }\n  note_click() {\n    this.Router.navigate(['user-note']);\n  }\n\n  myobjclick(val) {\n    //对方列表被单击\n\n    let obj = {\n      toUserId: val.userid,//发送方id\n      CName: val.CName,\n      UserImgUrl: val.UserImgUrl\n    }\n\n\n    this.Router.navigate([\"consult-time\"], { queryParams: obj })\n\n  }\n\n  doRefresh(refresher) {\n    //下拉刷新\n   \n    console.log('Begin async operation', refresher);\n    this.refresher = refresher;\n    // this.addLetterList();\n    this.page = 0;\n    this.addContactIng();\n   this.addNotesUnReadCount();\n   this.getUserNote();\n\n   \n    // setTimeout(() => {\n    //   this.refresher.target.complete();\n    // }, 2000);\n\n  }\n  dataHandle(meg: any, isSevaLocal: boolean) {\n    //处理收到的数据\n    //  console.log(\"contactret=\"+JSON.stringify(meg));\n\n    if (meg == null)\n      return;\n\n    if (this.infiniteScroll) {\n      this.infiniteScroll.target.complete(false);\n    }\n    if (this.refresher) {\n      this.refresher.target.complete();\n    }\n    if (meg['type'] == 'addContactIng_ret') {\n\n      if (meg['rows'].length < 10) {\n        this.checkMore = false;\n      } else {\n        this.checkMore = true;\n      }\n\n\n\n      if (meg['page'] != \"1\") {\n        //不是第一页\n        for (let i = 0; i < meg['rows'].length; i++) {\n          this.ContactIngItem.push(meg['rows'][i]);\n        }\n      }\n      else {\n        //第一次加载\n        this.ContactIngItem = meg['rows'];\n      }\n\n\n      if (this.ContactIngItem.length == 0) {\n        this.is_show_ing = false;\n      } else {\n        this.is_show_ing = true;\n      }\n    }\n  }\n  addContactIng() {\n    //加载正在咨询中的消息\n\n    console.log(\"addContactIng!\");\n    let c = {\n      type: 'addContactIng',\n      userId: this.appMin.getUserid(),\n      page: (this.page += 1).toString()\n    }\n    this.send(JSON.stringify(c));\n\n  }\n  myobjimg_click(val) {\n\n    console.log(\"myobjimg_click=\" + JSON.stringify(val));\n\n    let obj = {\n      toUserId: val.userid,//发送方id\n      CName: val.CName,\n      UserImgUrl: val.UserImgUrl,\n      orderId: val.orderId,\n      userIsObj: 1 //\n    }\n\n    // this.navCtrl.push(ConsultTimePage, obj, null);\n    this.Router.navigate([\"consult-time\"], { queryParams: obj })\n\n  }\n\n  ionViewWillEnter() {\n\n    console.log(\"ionViewWillEnter myletter!\")\n    if (!this.appMin.islogin()) {\n      this.logintxt = \"请先登录\";\n      this.ContactIngItem = [];\n      this.page = 0;\n      this.is_show_ing = false;\n    } else {\n      this.logintxt = \"没有其他消息。。\";\n    }\n\n    this.page = 0;\n    this.addContactIng();\n\n\n    this.addNotesUnReadCount();\n\n    var myEvent = new Event('addNotesUnReadCount');\n    window.dispatchEvent(myEvent);//触发登录全局事件 加载未读通知列表\n\n\n\n\n  }\n\n  addNotesUnReadCount() {\n    console.log(\"addNotesUnReadCount\");\n\n    let obj = {\n      type: \"addNotesUnReadCount\",\n      toUserId: this.appMin.getUserid(),\n    }\n\n    this.appMin.post((obj)).subscribe((data) => {\n\n      // console.log(data);\n      this.sysNotes = data['sysNotes'];\n      // this.userMsgs = data['userMsgs'];\n      // this.sumNote = this.sysNotes + this.userMsgs;\n\n\n\n\n    })\n  }\n  ngOnInit() {\n    // this.getUserNote();\n\n    window.addEventListener(\"back_consult\", () => {\n      //从聊天页面后退回来 重新刷新列表\n      this.page = 0;\n      this.addContactIng();\n      this.addNotesUnReadCount();\n      this.getUserNote();\n    })\n\n  }\n\n}\n"],"sourceRoot":""}